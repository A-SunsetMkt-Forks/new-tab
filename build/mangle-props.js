/**
 * A list of object property names which are safe to mangle.
 * Each array item is a part of the final regex.
 * Known bad: key, input, update (chrome.tabs.update), runtime (chrome.runtime)
 */
const mangleNames = [
  '\\$.*',
  '_.*',
  '.*_',
  '\\w{1,2}',
  'addDestroyListener',
  'afterInsert',
  'appendTo',
  'beginAsync',
  'beginElement',
  'builtin',
  'cache',
  'code',
  'comment',
  'component',
  'const',
  'correspondingUseElement',
  'createOut',
  'createTracker',
  'data',
  'def',
  'default',
  'destroy',
  'document',
  'elId',
  'element',
  'els',
  'emit',
  'end',
  'endElement',
  'error',
  'exports?',
  'filename',
  'flush',
  'forceUpdate',
  'getComponentForEl',
  'getComponents?',
  'getEl(s|Id)?',
  'getNode',
  'getOutput',
  'globals',
  'html',
  'init',
  'insertAfter',
  'installed',
  'isDestroyed',
  'isSync',
  'isVDOM',
  'listenerCount',
  'load(ed|erMetadata)?',
  'main',
  'meta',
  'node',
  'onLast',
  'once',
  'out',
  'parentOut',
  'path',
  'pending',
  'prependListener',
  'prependTo',
  'ready',
  'register',
  'remap',
  'removeAllListeners',
  'removeListener',
  'render(ToString|sync|er)?',
  'renderBody',
  'replaceChildrenOf',
  'replaceState',
  'require',
  'resolve',
  'run',
  'safeHTML',
  'search(Path)?',
  'selectedIndex',
  'setState',
  'setStateDirty',
  'shouldUpdate',
  'state',
  'subscribeTo',
  'sync',
  'template',
  'toHTML',
  'wait',
  'write',
];

// regex constructor
const mangleRegex = new RegExp(`^(${mangleNames.join('|')})$`, 'i');

// list of property names that are not safe to mangle
const mangleUnsafe = [
  '$$', // lasso module (short version of '$_mod')
  'ax_', // fixes broken element placeholder attribute
  'id', // element attribute
];

module.exports = {
  mangleRegex,
  mangleUnsafe,
};
